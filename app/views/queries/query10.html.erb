<!-- VIEW OF THE QUERY 10 -->

<!-- Form where type in the parameter :operating -->
<FORM><INPUT Type="button" VALUE="Back" onClick="history.go(-1);return true;"></FORM>
<%= form_tag queries_query10_path do %>
  <% if current_user %>

    <h3>Hello <%= current_user.name %>, check the latest company news:</h3><br><!-- welcome message -->
    <!-- <%= current_user.name %> shows the current user in  the welcome message -->

    <h4>Select your company from the list below</h4>
    <%= collection_select(:company, :company_id, @allcompanies, :id, :company_name, {:prompt => true}) %><br><br><!-- drop down companies menu -->

    <h4>Type in the name of your company</h4>
    <%= text_field_tag :company_name, nil, placeholder: "Insert Company Name" %><!-- 'insert operating company' field -->
    <%= submit_tag "Submit", class: "btn btn-primary" %><!-- form submit button -->

  <% end %>
<% end %>

<div class="page-header"><h3>Latest <%= params[:company_name] %> news:</h3></div>
<!-- params[:company_name] allows the title to be matched accordingly with the company name selected -->

<!-- table showing query outcomes -->
 <div class="span3">
  <table align="" border="1px" class="table table-striped">
    <th>Company Name</th>
    <th>News Title</th>
    <th>Date</th>
    <th>Link</th>
    <% @companies.each_row do |item| %>  <!-- @companies stores all the data I want to show and it is in the form of a table list -->
    <tr><td><%= item[0]  %></td>         <!-- retrieve the first attribute -->
    <td><%= item[1]  %></td>             <!-- retrieve the second attribute -->
    <td><%= item[2]  %></td>             <!-- retrieve the third attribute -->
    <td><%= item[3]  %></td>             <!-- retrieve the fourth attribute -->
    <% end %>
  </table>
</div>
